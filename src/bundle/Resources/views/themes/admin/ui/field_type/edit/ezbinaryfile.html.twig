{% trans_default_domain 'ezplatform_content_forms_content' %}

{% use '@ezdesign/ui/field_type/edit/binary_base.html.twig' %}

{%- block ezplatform_fieldtype_ezbinaryfile_row -%}
    {% set preview_block_name = 'ezbinaryfile_preview' %}
    {% set max_file_size = min(form.parent.vars.value.fieldDefinition.validatorConfiguration.FileSizeValidator.maxFileSize * 1024 * 1024, max_upload_size)|round %}
    {{ block('binary_base_row') }}
{%- endblock -%}

{% block ezbinaryfile_preview %}
    <div class="ez-field-edit-preview">
        <div class="ez-field-edit-preview__visual">
            <div class="ez-field-edit-preview__file-name">{{ form.parent.vars.value.value.fileName }}</div>
            <div class="ez-field-edit-preview__file-size">{{ form.parent.vars.value.value.fileSize|ez_file_size(2) }}</div>
        </div>
        <div class="ez-field-edit-preview__actions">
            <a class="ez-field-edit-preview__action--preview btn ibexa-btn ibexa-btn--ghost ibexa-btn--no-text" href="{{ form.parent.vars.value.value.uri }}"
               title="{{ 'ezbinaryfile.action.download'|trans|desc('Download') }}" download>
                <svg class="ez-icon ez-icon--small">
                    <use xlink:href="{{ ez_icon_path('download') }}"></use>
                </svg>
            </a>
            <button type="button" class="ez-field-edit-preview__action--remove btn ibexa-btn ibexa-btn--ghost ibexa-btn--no-text" title="{{ 'ezbinaryfile.action.remove'|trans|desc('Remove') }}">
                <svg class="ez-icon ez-icon--small">
                    <use xlink:href="{{ ez_icon_path('trash') }}"></use>
                </svg>
            </button>
        </div>
    </div>
{% endblock %}
