imports:
    - { resource: services/service_aliases.yml }
    - { resource: services/controllers.yml }
    - { resource: services/tabs.yml }
    - { resource: services/menu.yml }
    - { resource: services/application_config.yml }
    - { resource: services/type_extensions.yml }
    - { resource: services/pagination.yml }

parameters:

services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    EzSystems\EzPlatformAdminUiBundle\ParamConverter\:
        resource: "../../ParamConverter/*"
        public: true
        tags:
            - { name: 'request.param_converter' }

    EzSystems\EzPlatformAdminUi\EventListener\:
        resource: "../../../lib/EventListener/*"
        public: true
        tags:
            - { name: kernel.event_subscriber }

    EzSystems\EzPlatformAdminUi\EventListener\RequestListener:
        arguments:
            - '%ezpublish.siteaccess.groups_by_siteaccess%'
        tags:
            - { name: kernel.event_subscriber }

    EzSystems\EzPlatformAdminUiBundle\EventListener\RequestAttributesListener:
        arguments:
            - '%ezpublish.siteaccess.groups%'
        tags:
            - {name: kernel.event_subscriber}

    EzSystems\EzPlatformAdminUi\Form\Type\:
        resource: '../../../lib/Form/Type'

    EzSystems\EzPlatformAdminUi\Form\DataMapper\:
        resource: '../../../lib/Form/DataMapper'

    EzSystems\EzPlatformAdminUi\Form\Type\Policy\PolicyChoiceType:
        arguments:
            $policyMap: "%ezpublish.api.role.policy_map%"

    EzSystems\EzPlatformAdminUi\UI\Dataset\Factory: ~
    EzSystems\EzPlatformAdminUi\UI\Value\ValueFactory:
        lazy: true
        tags:
            - { name: form.type }

    EzSystems\EzPlatformAdminUi\Form\Factory\FormFactory: ~

    EzSystems\EzPlatformAdminUi\UI\Config\Provider\ContentTypeMappings:
        arguments:
            $locationMappings: "%ezplatform.multifile_upload.location.mappings%"
            $defaultMappings: "%ezplatform.multifile_upload.location.default_mappings%"
            $fallbackContentType: "%ezplatform.multifile_upload.fallback_content_type%"
            $maxFileSize: "%ez_systems.multifile_upload.max_file_size%"
        tags:
            - { name: ezplatform.admin_ui.config_provider, key: 'multiFileUpload' }

    ezsystems.ezplatform_admin_ui.ui.config.provider.image_variations:
        class: EzSystems\EzPlatformAdminUi\UI\Config\Provider\Value
        arguments:
            $value: "$image_variations$"
        tags:
            - { name: ezplatform.admin_ui.config_provider, key: 'imageVariations' }

    EzSystems\EzPlatformAdminUi\Notification\FlashBagNotificationHandler:
        arguments:
            $flashBag: "@=service('session').getFlashBag()"

    EzSystems\EzPlatformAdminUi\Notification\NotificationHandlerInterface: '@EzSystems\EzPlatformAdminUi\Notification\FlashBagNotificationHandler'

    EzSystems\EzPlatformAdminUi\Form\Processor\:
        resource: "../../../lib/Form/Processor/*"
        public: true
        tags:
            - { name: kernel.event_subscriber }

    EzSystems\EzPlatformAdminUi\Form\Type\Extension\Content\ContentEditTypeExtension:
        tags:
            - { name: form.type_extension, extended_type: EzSystems\RepositoryForms\Form\Type\Content\ContentEditType }
